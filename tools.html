<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>الأدوات – PdfSwift</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="style.css">

<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
</head>

<body class="light-theme">

<header class="header">
  <div class="container">
    <a href="index.html" class="logo">Pdf<span>Swift</span></a>
    <nav class="nav">
      <a href="index.html">الرئيسية</a>
      <a href="tools.html" class="active">الأدوات</a>
      <a href="about.html">عن الموقع</a>
      <a href="privacy.html">الخصوصية</a>
    </nav>
  </div>
</header>

<main class="container tools-page">
<h1 class="section-title">أدوات PDF محلية 100%</h1>
<p style="text-align:center;margin-bottom:3rem">كل المعالجة تتم داخل متصفحك</p>

<div class="grid tool-selector">
<button class="tool-btn" data-tool="merge"><i class="fas fa-object-group"></i><span>دمج ملفات</span></button>
<button class="tool-btn" data-tool="split"><i class="fas fa-scissors"></i><span>تقسيم PDF</span></button>
<button class="tool-btn" data-tool="rotate"><i class="fas fa-redo"></i><span>تدوير صفحات</span></button>
<button class="tool-btn" data-tool="watermark"><i class="fas fa-stamp"></i><span>علامة مائية</span></button>

<button class="tool-btn"><i class="fas fa-trash"></i><span>حذف صفحات</span><span class="coming-soon">قريبًا</span></button>
<button class="tool-btn"><i class="fas fa-file-lines"></i><span>استخراج النص</span><span class="coming-soon">قريبًا</span></button>
<button class="tool-btn"><i class="fas fa-image"></i><span>استخراج صور</span><span class="coming-soon">قريبًا</span></button>
<button class="tool-btn"><i class="fas fa-images"></i><span>PDF إلى صور</span><span class="coming-soon">قريبًا</span></button>
</div>

<section id="tool-merge" class="tool-section" hidden>
<h2>دمج ملفات PDF</h2>
<input type="file" id="merge-files" multiple accept=".pdf">
<button id="btn-merge" class="action-btn">دمج الآن</button>
<div id="merge-status" class="status"></div>
</section>

<section id="tool-split" class="tool-section" hidden>
<h2>استخراج صفحات</h2>
<input type="file" id="split-file" accept=".pdf">
<input type="text" id="split-ranges" placeholder="مثال: 1-3,5">
<button id="btn-split" class="action-btn">استخراج</button>
<div id="split-status" class="status"></div>
</section>

<section id="tool-rotate" class="tool-section" hidden>
<h2>تدوير الصفحات</h2>
<input type="file" id="rotate-file" accept=".pdf">
<select id="rotate-degree">
<option value="90">90°</option>
<option value="180">180°</option>
<option value="270">270°</option>
</select>
<button id="btn-rotate" class="action-btn">تدوير</button>
<div id="rotate-status" class="status"></div>
</section>

<section id="tool-watermark" class="tool-section" hidden>
<h2>إضافة علامة مائية</h2>
<input type="file" id="watermark-file" accept=".pdf">
<input type="text" id="watermark-text" placeholder="النص">
<button id="btn-watermark" class="action-btn">إضافة</button>
<div id="watermark-status" class="status"></div>
</section>

<button id="back" class="action-btn" hidden>← العودة</button>
</main>

<footer class="footer">
<div class="container"><p>© 2026 PdfSwift</p></div>
</footer>

<script>
const { PDFDocument, degrees, rgb, StandardFonts } = PDFLib;

/* التنقل */
document.querySelectorAll(".tool-btn[data-tool]").forEach(b=>{
b.onclick=()=>{
document.querySelector(".tool-selector").style.display="none";
document.querySelector(".section-title").style.display="none";
document.querySelector("main p").style.display="none";
document.getElementById("tool-"+b.dataset.tool).hidden=false;
document.getElementById("back").hidden=false;
};
});
document.getElementById("back").onclick=()=>{
document.querySelectorAll(".tool-section").forEach(s=>s.hidden=true);
document.querySelector(".tool-selector").style.display="grid";
document.querySelector(".section-title").style.display="block";
document.querySelector("main p").style.display="block";
document.getElementById("back").hidden=true;
};

/* تحميل */
function download(bytes,name){
const a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([bytes],{type:"application/pdf"}));
a.download=name;a.click();
}

/* دمج */
document.getElementById("btn-merge").onclick=async()=>{
const files=document.getElementById("merge-files").files;
if(!files.length)return;
const pdf=await PDFDocument.create();
for(const f of files){
const p=await PDFDocument.load(await f.arrayBuffer());
const pages=await pdf.copyPages(p,p.getPageIndices());
pages.forEach(pg=>pdf.addPage(pg));
}
download(await pdf.save(),"merged.pdf");
};

/* تقسيم */
document.getElementById("btn-split").onclick=async()=>{
const file=document.getElementById("split-file").files[0];
if(!file)return;
const src=await PDFDocument.load(await file.arrayBuffer());
const out=await PDFDocument.create();
document.getElementById("split-ranges").value.split(",").forEach(r=>{
if(r.includes("-")){
let[s,e]=r.split("-").map(n=>n-1);
for(let i=s;i<=e;i++)out.addPage(src.getPage(i));
}else out.addPage(src.getPage(r-1));
});
download(await out.save(),"pages.pdf");
};

/* تدوير */
document.getElementById("btn-rotate").onclick=async()=>{
const file=document.getElementById("rotate-file").files[0];
if(!file)return;
const pdf=await PDFDocument.load(await file.arrayBuffer());
const d=parseInt(document.getElementById("rotate-degree").value);
pdf.getPages().forEach(p=>p.setRotation(degrees(p.getRotation().angle+d)));
download(await pdf.save(),"rotated.pdf");
};

/* علامة مائية */
document.getElementById("btn-watermark").onclick=async()=>{
const file=document.getElementById("watermark-file").files[0];
if(!file)return;
const pdf=await PDFDocument.load(await file.arrayBuffer());
const font=await pdf.embedFont(StandardFonts.HelveticaBold);
pdf.getPages().forEach(p=>{
const{width,height}=p.getSize();
p.drawText(document.getElementById("watermark-text").value,{
x:width/4,y:height/2,size:40,font,
color:rgb(0.7,0.7,0.7),rotate:degrees(-45),opacity:.4});
});
download(await pdf.save(),"watermark.pdf");
};
</script>

</body>
</html>
